---
layout: default

parent: 7. コマンド詳細
grand_parent: WEB API

title: 7.41 - 7.50
nav_order: 5
permalink: /API/7/5
---

# {{ page.title }}
{: .no_toc }

## Table of contents 
{: .no_toc .text-delta }

1. TOC
{:toc}

---

# 7.41.	Get_PointGrant

**概要**
```
顧客の現在のポイント付与率の取得を行う
```

**URL**
```
https://(指定されたURL)/Get_PointGrant.aspx
```

**Request**

|     必須    	|     名前         	|     属性      	|     最大桁数    	|     摘要      	|
|:-------------:	|------------------	|---------------	|:-----------------:	|---------------	|
|     ○       	|     user_code    	|     string    	|     30          	|     顧客CD    	|

**Response**

|     名前          	|     属性      	|     最大桁数    	|     摘要                        	|
|-------------------	|---------------	|:-----------------:	|---------------------------------	|
|     StatusCode    	|     int       	|     6           	|     ステータスコード            	|
|     Status        	|     string    	|     200         	|     ステータス内容              	|
|     Grant         	|     double    	|     3           	|     付与率（10倍にして送信）    	|

**実行例**
```
http://ap01.dtpnet.co.jp:85/cv.net_adi-mo/isql/api/Get_PointGrant.aspx?user_code=12345697890123
```

**結果例**

成功）
```
{"StatusCode":0,"Status":"OK","Grant":"20"}
```

失敗）
```
{“StatusCode”:“-33002”,“Status”:“顧客CDが存在しません”,”Grant”:null}
```

**Status**

|     StatusCode             	|     Status                          	|
|:----------------------------:	|-------------------------------------	|
|     0                      	|     OK                              	|
|     -33001                 	|     パラメータが不足しています      	|
|     -33002                 	|     顧客CDが存在しません            	|
|     -33003                 	|     付与率が登録されていません。    	|
|     -33004～     -33099    	|     内部エラー: (エラー内容詳細)    	|

**使用テーブル**

|     テーブル名           	|     内容    	|
|:--------------------------:	|:-------------:	|
|     HC$MASTER_MEISHO     	|     参照    	|
|     HC$MASTER_KOKYAKU    	|     参照    	|

# 7.42.	Set_OrderInfo

**概要**
```
ECサイトでの受注情報をDTPの基幹システムへ送信し売上伝票を作成し、在庫と売掛を更新する
```

**URL**
```
https://(指定されたURL)/Set_OrderInfo.aspx
```

**Request**

|     必須    	|     名前              	|     属性       	|     最大桁数    	|     摘要                                                                   	|
|:-------------:	|-----------------------	|----------------	|:-----------------:	|----------------------------------------------------------------------------	|
|             	|     Tokenid           	|     String     	|     64          	|     顧客識別用トークンID                                                   	|
|             	|     user_code         	|     String     	|     30          	|     顧客CD                                                                 	|
|     〇      	|     Seq_no            	|     String     	|     14          	|     受注ID                                                                 	|
|     〇      	|     Seles_shop        	|     String     	|     8           	|     店舗CD                                                                 	|
|     〇      	|     Sales_division    	|     String     	|     2           	|     取引区分   (10:売上、11:セール売上、20:売上返品、21:セール売上返品)    	|
|             	|     Sales_days        	|     String     	|     8           	|     売上日                                                                 	|
|             	|     Order             	|     (class)    	|                 	|     受注データ(配列)                                                       	|
|     〇      	|     Goods             	|     String     	|     20          	|     商品CD                                                                 	|
|     〇      	|     Color             	|     String     	|     20          	|     色CD                                                                   	|
|     〇      	|     Size              	|     String     	|     20          	|     サイズCD                                                               	|
|     〇      	|     Price             	|     Int        	|     10          	|     単価                                                                   	|
|     〇      	|     Quantity          	|     Int        	|     10          	|     数量                                                                   	|

**Response**

|     名前          	|     属性      	|     最大桁数    	|     摘要                	|
|-------------------	|---------------	|:-----------------:	|-------------------------	|
|     StatusCode    	|     Int       	|     6           	|     ステータスコード    	|
|     Status        	|     String    	|     200         	|     ステータス内容      	|

**実行例**
```
http://ap01.dtpnet.co.jp:85/cv.net_adi-mo/isql/api/Set_OrderInfo?Tokenid=******&user_code=12345697893&Seq_no=13131&Seles_shop=100001&Sales_division=10&Order=[{"Goods":"LHAN12A1001-N","Color":"40","Size":"007","Price":"1000","Quantity":"1"}]
```

**結果例**
成功）
```
{"StatusCode":0,"Status":"OK"}
```

失敗）
```
{“StatusCode”:“-33003”,“Status”:“店舗CDが存在しません。”,”Sales”:null}
```

**Status**

|     StatusCode       	|     Status                                              	|
|:----------------------:	|---------------------------------------------------------	|
|     0                	|     OK                                                  	|
|     -33001           	|     パラメータが不足しています。                        	|
|     -33003           	|     店舗CDが存在しません。                              	|
|     -33005           	|     この商品・色・サイズの組み合わせは存在しません。    	|
|     -33006~-33099    	|     内部エラー: (エラー内容詳細)                        	|

**使用テーブル**


|     テーブル名           	|     内容                                                                                                                                                                                                                                                                                                                                                    	|
|:--------------------------:	|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------	|
|     HC$TRAN_TORI0        	|     追加     伝票処理区分 = 1、取引区分 = Sales_division、関連伝票NO2 = Seq_no、<br> 顧客TEL = user_code、     取引先CD1 = 店舗CD、倉庫CD　= 店舗CD、<br> 在庫計上日 = Sales_days (存在しないならば当日日付)、   <br>  掛計上日 = Sales_days(存在しないならば当日日付)                                                                                                     	|
|     HC$TRAN_TORI1        	|     追加     伝票処理区分 = 1、明細取引区分 = Sales_division、商品CD = Goods、<br> 色CD = Color、サイズCD = Size、     数量 = Quantity、単価 = Price、<br> 金額 = Price × Quantity、Sales_days(存在しないならば当日日付)、    <br> 在庫計上日 = Sales_days(存在しないならば当日日付)、   <br>  上代単価 = 商品マスタ上代(商品マスタに存在しないならば0)、下代単価　= Price    	|
|     HC$MASTER＿MEISHO    	|     参照                                                                                                                                                                                                                                                                                                                                                    	|

# 7.43.	Set_Delcoupon

**概要**
```
顧客の使用済クーポン情報の削除を行う。
```

**URL**
```
https://(指定されたURL)/Set_Delcoupon.aspx
```

**Request**

|     必須    	|     名前           	|     属性      	|     最大桁数    	|     摘要                    	|
|:-------------:	|--------------------	|---------------	|:-----------------:	|-----------------------------	|
|     ○       	|     tokenid        	|     string    	|     64          	|     顧客識別用トークンID    	|
|     ○       	|     user_code      	|     string    	|     8           	|     顧客CD                  	|
|     ○       	|     coupon_code    	|     string    	|     20          	|     クーポンCD              	|

**Response**

|     名前          	|     属性      	|     最大桁数    	|     摘要                	|
|-------------------	|---------------	|:-----------------:	|-------------------------	|
|     StatusCode    	|     int       	|     6           	|     ステータスコード    	|
|     Status        	|     string    	|     200         	|     ステータス内容      	|

**実行例**
```
http://ap01.dtpnet.co.jp:85/cv.net_adi-mo/isql/api/Set_Delcoupon.aspx?tokenid =********&user_code=12345697890123&coupon_code=1234
```

**結果例**

成功）
```
{"StatusCode":0,"Status":"OK"}
```

失敗）
```
{“StatusCode”:“-34003”,“Status”:“顧客CDが間違っています”l}
```

**Status**

|     StatusCode             	|     Status                                        	|
|:----------------------------:	|---------------------------------------------------	|
|     0                      	|     OK                                            	|
|     -34001                 	|     パラメータが不足しています                    	|
|     -34002                 	|     ログインIDが存在しません                      	|
|     -34003                 	|     顧客CDが存在しません                          	|
|     -34004                 	|     この顧客は本クーポンを使用しておりません。    	|
|     -34005～  -34099    	|     内部エラー: (エラー内容詳細)                  	|

**使用テーブル**

|     テーブル名                 	|     内容          	|
|:--------------------------------:	|:-------------------:	|
|     HC$TRAN_COUPON             	|     参照、削除    	|
|     HC$MASTER_KOKYAKU          	|     参照          	|
|     HC$MASTER_KOKYAKU_LOGIN    	|     参照          	|

# 7.44

**概要**
```

```

**URL**
```

```

**Request**


**Response**


**Status**

**使用テーブル**

# 7.45

**概要**
```

```

**URL**
```

```

**Request**


**Response**


**Status**

**使用テーブル**

# 7.46

**概要**
```

```

**URL**
```

```

**Request**


**Response**


**Status**

**使用テーブル**

# 7.47

**概要**
```

```

**URL**
```

```

**Request**


**Response**


**Status**

**使用テーブル**

# 7.48

**概要**
```

```

**URL**
```

```

**Request**


**Response**


**Status**

**使用テーブル**

# 7.49

**概要**
```

```

**URL**
```

```

**Request**


**Response**


**Status**

**使用テーブル**

# 7.50

**概要**
```

```

**URL**
```

```

**Request**


**Response**


**Status**

**使用テーブル**
